
<div class="cardCont" 
    [ngStyle]="{'width': '100%',
                'display': galleryConfig?.textPosition === 'overlyed' ? 'block' : 'grid',
                'height' : galleryConfig?.cardHeight + 'rem',
                'cursor' : card?.linkTo != '' ? 'pointer' : 'inherit',
                'border': getGalleryBorder()}"
    [ngClass]="['textColor_'+ galleryConfig?.cardTextColor]"
    (click)="onCardClicked()">

    <ng-container *ngIf="galleryConfig?.useText && 
                         galleryConfig?.textPosition === 'separated' &&
                        (galleryConfig?.useTitle || galleryConfig?.useDescription)
                        then topHeader; else empty">
    </ng-container>
    
    <ng-container *ngTemplateOutlet="image"></ng-container>
    
    <ng-container *ngIf="galleryConfig?.useText && 
                        galleryConfig?.textPosition === 'separated' &&
                        (galleryConfig?.useTitle || galleryConfig?.useDescription)
                        then footer; else empty">
    </ng-container>
</div>


<ng-template #topHeader>
    <div [ngStyle]="{'justify-content': galleryConfig?.horizontalAlign,
                    'background-color': galleryConfig?.cardTextColor === 'invert' && galleryConfig?.textPosition === 'separated' ? '#000' : 'Transparent'}"
          class="ellipsis">
         
        <ng-container *ngIf="galleryConfig?.groupTitleAndDescription === 'grouped' && 
                             galleryConfig?.verticalAlign === 'start'">
            <div class="groupedText"> 
                <ng-container *ngTemplateOutlet="text; context: {entry: 'title'}">
                </ng-container>
                <ng-container *ngTemplateOutlet="text; context: {entry: 'description'}">
                </ng-container>
            </div>
        </ng-container>
        <ng-container *ngIf="galleryConfig?.groupTitleAndDescription === 'ungrouped'">
            <ng-container *ngTemplateOutlet="text; context: {entry: 'title'}">
            </ng-container>
        </ng-container>
                    
    </div>
</ng-template>

<ng-template #image>
    <div class="imageCont"
    [ngStyle]="{'justify-content': galleryConfig?.verticalAlign,
                 'box-shadow': getOverlay(),
                 'background-image' : getGradientOverlay()}"
            
                
         style='height:100%; width: 100%;'>
        <ng-container *ngIf="galleryConfig?.useText && 
                         galleryConfig?.textPosition === 'overlyed'; 
                         then overlayedText; else empty"></ng-container>
    </div>
</ng-template>

<ng-template #footer>
    <div [ngStyle]="{'justify-content': galleryConfig?.horizontalAlign,
                    'background-color': galleryConfig?.cardTextColor === 'invert' && galleryConfig?.textPosition === 'separated' ? '#000' : 'Transparent'}">
         
    <ng-container *ngIf="galleryConfig?.groupTitleAndDescription === 'grouped' && galleryConfig?.verticalAlign === 'end'">
            <div class="groupedText"> 
                <ng-container *ngTemplateOutlet="text; context: {entry: 'title'}">
                </ng-container>
                <ng-container *ngTemplateOutlet="text; context: {entry: 'description'}">
                </ng-container>
            </div>
    </ng-container>
    <ng-container *ngIf="galleryConfig?.groupTitleAndDescription === 'ungrouped'">
            <ng-container *ngTemplateOutlet="text; context: {entry: 'description'}">
            </ng-container>
    </ng-container>
    </div>
</ng-template>

<ng-template #overlayedText>
    <ng-container *ngTemplateOutlet="text; context: {entry: 'title'}">
    </ng-container>
    <ng-container *ngTemplateOutlet="text; context: {entry: 'description'}">
    </ng-container>
</ng-template>


<ng-template #text let-entry="entry">
    <div *ngIf="entry === 'title' && galleryConfig?.useTitle"
         [ngClass]="['title-' + galleryConfig?.titleSize, 'ellipsis']"
         [ngStyle]="{'display' : 'block', 'text-align': galleryConfig?.horizontalAlign}">
         {{card.title}}
</div>
    <textarea *ngIf="entry === 'description' && galleryConfig?.useDescription" 
             [ngClass]="['body-' + galleryConfig?.descriptionSize]"
             [ngStyle]="{'display' : 'block', 'text-align': galleryConfig?.horizontalAlign}"
            [rows]="galleryConfig?.descriptionMaxNumOfLines"
            [minRows]="1"
            [maxRows]="galleryConfig?.descriptionMaxNumOfLines"
        class="textarea">{{card.description}}
</textarea>

</ng-template>

<ng-template #empty><div></div></ng-template>